<form
  [formGroup]="productForm"
  (ngSubmit)="onAddProduct()"
  #form
  class="card p-4 shadow-sm"
>
  <div class="card-body">
    <!-- Product Name -->
    <div class="mb-3">
      <label for="name" class="form-label fw-bold">نام محصول</label>
      <input
        id="name"
        type="text"
        name="name"
        formControlName="name"
        class="form-control"
        placeholder="نام محصول را وارد کنید"
      />
    </div>

    <!-- Summary and Upload -->
    <div class="row g-3">
      <!-- Summary -->
      <div class="col-md-6">
        <label for="summary" class="form-label fw-bold">خلاصه</label>
        <input
          id="summary"
          type="text"
          name="summary"
          formControlName="summary"
          class="form-control"
          placeholder="خلاصه محصول را وارد کنید"
        />
      </div>

      <!-- Image Upload -->
      <div class="col-md-6">
        <label for="image" class="form-label fw-bold">آپلود تصویر</label>
        <div class="card p-3">
          <p-fileUpload
            #fileUpload
            name="image"
            formControlName="image"
            [url]="url"
            accept="image/*"
            [auto]="false"
            appImgUpload
            chooseLabel="آپلود تصویر"
            [customUpload]="true"
            (uploadHandler)="onUpload($event)"
            [showUploadButton]="false"
            [showCancelButton]="false"
          ></p-fileUpload>
        </div>
      </div>
    </div>

    <!-- Brand and Categories -->
    <div class="row g-3 mt-3">
      <!-- Categories -->
      <div class="col-md-6">
        <label for="categories" class="form-label fw-bold">دسته بندی</label>
        <p-treeSelect
          [options]="categoryList"
          id="categories"
          formControlName="categories"
          [metaKeySelection]="false"
          selectionMode="multiple"
          placeholder="انتخاب دسته‌بندی"
          class="form-select"
          (onNodeSelect)="onCategoryChange()"
        ></p-treeSelect>
      </div>
      <!-- Brand -->
      <div class="col-md-6">
        <label for="brand" class="form-label fw-bold">برند</label>
        <p-select
          [options]="brands"
          id="brands"
          name="brand"
          formControlName="brand"
          placeholder="برند محصول"
          class="form-select"
        ></p-select>
      </div>
    </div>

    <!-- Price and Quantity -->
    <div class="row g-3 mt-3">
      <!-- Price -->
      <div class="col-md-6">
        <label for="price" class="form-label fw-bold">قیمت</label>
        <input
          id="price"
          type="number"
          name="price"
          formControlName="price"
          class="form-control"
          placeholder="قیمت محصول را وارد کنید"
        />
      </div>

      <!-- Quantity -->
      <div class="col-md-6">
        <label for="quantity" class="form-label fw-bold">تعداد در انبار</label>
        <input
          id="quantity"
          type="number"
          name="quantity"
          formControlName="quantity"
          class="form-control"
          placeholder="تعداد موجودی را وارد کنید"
        />
      </div>
    </div>

    <!-- Description -->
    <div class="mt-3">
      <label for="description" class="form-label fw-bold">توضیحات</label>
      <textarea
        rows="5"
        class="form-control"
        name="description"
        formControlName="description"
        id="description"
        placeholder="توضیحات محصول را وارد کنید"
      ></textarea>
    </div>

    <!-- Actions -->
    <div class="d-flex justify-content-between align-items-center mt-4">
      <p-button
        label="پاک کردن فرم"
        [link]="true"
        class="btn btn-outline-secondary"
        (click)="onReset()"
      ></p-button>
      <p-button
        label="ثبت محصول"
        type="submit"
        class="btn btn-primary"
      ></p-button>
    </div>

    <!-- Validation Feedback -->
    <div
      *ngIf="productForm.touched && productForm.dirty && productForm.invalid"
      class="alert alert-danger mt-3 text-center"
    >
      لطفا از ورودی‌های معتبر استفاده کنید
    </div>
  </div>
</form>
